"use strict";(globalThis["webpackChunkcasestudyvue"]=globalThis["webpackChunkcasestudyvue"]||[]).push([[640],{5572:(e,t,a)=>{a.d(t,{C:()=>o,_:()=>s});const r="/api/",s=async e=>{let t,a=l();try{let s=await fetch(`${r}${e}`,{method:"GET",headers:a});t=await s.json()}catch(s){console.log(s),t={error:`Error has occured: ${s.message}`}}return t},l=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e},o=async(e,t)=>{let a,s=l();try{let l=await fetch(`${r}${e}`,{method:"POST",headers:s,body:JSON.stringify(t)});a=await l.json()}catch(o){a=o}return a}},7081:(e,t,a)=>{a.d(t,{p:()=>s,x:()=>r});const r=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD"}),s=e=>{let t;t=void 0===e?new Date:new Date(Date.parse(e));let a=t.getDate(),r=t.getMonth()+1,s=t.getFullYear(),l=t.getHours(),o=t.getMinutes();return o<10&&(o="0"+o),s+"-"+r+"-"+a+" "+l+":"+o}},6640:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(9835),s=a(6970);const l={class:"text-center"},o=(0,r._)("div",{class:"text-h4 q-ma-md text-primary"},"Order History",-1),d={class:"text-h6 text-negative"},c={class:"text-h3 text-center text-primary"},u={class:"text-h6 text-center text-primary"},n=["src"],i={class:"text-center text-positive text-subtitle2"};function m(e,t,a,m,w,f){const p=(0,r.up)("q-item-section"),y=(0,r.up)("q-item"),_=(0,r.up)("q-list"),g=(0,r.up)("q-card"),x=(0,r.up)("q-scroll-area"),h=(0,r.up)("q-btn"),k=(0,r.up)("q-card-actions"),W=(0,r.up)("q-card-section"),q=(0,r.up)("q-avatar"),b=(0,r.up)("q-dialog"),U=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",l,[o,(0,r._)("div",d,(0,s.zw)(m.state.status),1),(0,r.Wm)(x,{style:{height:"55vh"}},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"q-ma-md"},{default:(0,r.w5)((()=>[m.state.orders.length>0?((0,r.wg)(),(0,r.j4)(y,{key:0,style:{bottom:"-2vh"}},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-2 text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("#")])),_:1}),(0,r.Wm)(p,{class:"text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Date")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(_,{separator:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.state.orders,(e=>((0,r.wg)(),(0,r.j4)(y,{clickable:"",key:e.id,onClick:t=>m.selectOrder(e.id)},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-2"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.id),1)])),_:2},1024),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(m.formatDate(e.orderDate)),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})]),(0,r.Wm)(b,{modelValue:m.state.orderSelected,"onUpdate:modelValue":t[0]||(t[0]=e=>m.state.orderSelected=e),"transition-show":"rotate","transition-hide":"rotate"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Wm)(k,{align:"right"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(h,{flat:"",label:"X",color:"primary",class:"text-h5"},null,512),[[U]])])),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[(0,r._)("div",c," Order "+(0,s.zw)(m.state.selectedOrder[0].id),1),(0,r._)("div",u,(0,s.zw)(m.formatDate(m.state.selectedOrder[0].orderDate)),1)])),_:1}),(0,r.Wm)(W,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{class:"q-mt-md",size:"xl",square:""},{default:(0,r.w5)((()=>[(0,r._)("img",{src:"img/Running_shoe_icon.png"},null,8,n)])),_:1})])),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[m.state.orders.length>0?((0,r.wg)(),(0,r.j4)(y,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"text-subtitle1 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Name")])),_:1}),(0,r.Wm)(p,{class:"text-subtitle1 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Quantites")])),_:1}),(0,r.Wm)(p,{class:"text-subtitle1 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Extended")])),_:1})])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(_,{separator:""},{default:(0,r.w5)((()=>[m.state.orders.length>0?((0,r.wg)(),(0,r.j4)(y,{key:0,class:"justify-center"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-1 text-subtitle2 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("S")])),_:1}),(0,r.Wm)(p,{class:"col-1 text-subtitle2 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("O")])),_:1}),(0,r.Wm)(p,{class:"col-1 text-subtitle2 q-ml-sm text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("B")])),_:1})])),_:1})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.state.order,(e=>((0,r.wg)(),(0,r.j4)(y,{class:"justify-end",clickable:"",key:e.productId},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.productName),1)])),_:2},1024),(0,r.Wm)(p,{class:"col-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.qtySold),1)])),_:2},1024),(0,r.Wm)(p,{class:"col-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.qtyOrdered),1)])),_:2},1024),(0,r.Wm)(p,{class:"col-1"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(e.qtyBackOrdered),1)])),_:2},1024),(0,r.Wm)(p,{class:"col-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(m.formatCurrency(e.sellingPrice*e.qtyOrdered)),1)])),_:2},1024)])),_:2},1024)))),128)),(0,r.Wm)(y,{class:"justify-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-4 text-weight-bold"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Sub: ")])),_:1}),(0,r.Wm)(p,{class:"col-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(m.formatCurrency(m.subTotal())),1)])),_:1})])),_:1}),(0,r.Wm)(y,{class:"justify-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-4 text-weight-bold"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Tax(13%): ")])),_:1}),(0,r.Wm)(p,{class:"col-4"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(m.formatCurrency(m.tax())),1)])),_:1})])),_:1}),(0,r.Wm)(y,{class:"justify-end"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{class:"col-4 text-weight-bold text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Total: ")])),_:1}),(0,r.Wm)(p,{class:"col-4 text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(m.formatCurrency(m.total())),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.Wm)(W,null,{default:(0,r.w5)((()=>[(0,r._)("div",i," Details for order "+(0,s.zw)(m.state.selectedOrder[0].id),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var w=a(499),f=a(7081),p=a(5572);const y={setup(){let e=(0,w.qj)({status:"",orders:[],order:[],selectedOrder:[],orderSelected:!1});(0,r.bv)((()=>{t()}));const t=async()=>{e.status="loading orders...";try{const t=JSON.parse(sessionStorage.getItem("customer"));e.orders=await(0,p._)(`order/${t.email}`),e.status=`loaded ${e.orders.length} orders`}catch(t){console.log(t),e.status=`Error has occured: ${t.message}`}},a=async t=>{try{const a=JSON.parse(sessionStorage.getItem("customer"));e.selectedOrder=e.orders.filter((e=>e.id===t)),e.orderSelected=!0,e.order=await(0,p._)(`order/${t}/${a.email}`)}catch(a){console.log(a),e.status=`Error has occured: ${a.message}`}},s=()=>{let t=0;return e.order.forEach((e=>{t+=e.sellingPrice*e.qtyOrdered})),t},l=()=>{const e=.13;return s()*e},o=()=>l()+s();return{state:e,formatDate:f.p,formatCurrency:f.x,selectOrder:a,subTotal:s,total:o,tax:l}}};var _=a(1639),g=a(1019),x=a(4458),h=a(490),k=a(1233),W=a(3246),q=a(7743),b=a(1821),U=a(4455),S=a(3190),v=a(1357),O=a(2146),z=a(9984),C=a.n(z);const D=(0,_.Z)(y,[["render",m]]),j=D;C()(y,"components",{QScrollArea:g.Z,QCard:x.Z,QItem:h.Z,QItemSection:k.Z,QList:W.Z,QDialog:q.Z,QCardActions:b.Z,QBtn:U.Z,QCardSection:S.Z,QAvatar:v.Z}),C()(y,"directives",{ClosePopup:O.Z})}}]);