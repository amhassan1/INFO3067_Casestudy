"use strict";(globalThis["webpackChunkcasestudyvue"]=globalThis["webpackChunkcasestudyvue"]||[]).push([[176],{5572:(e,t,s)=>{s.d(t,{C:()=>n,_:()=>r});const a="/api/",r=async e=>{let t,s=l();try{let r=await fetch(`${a}${e}`,{method:"GET",headers:s});t=await r.json()}catch(r){console.log(r),t={error:`Error has occured: ${r.message}`}}return t},l=()=>{const e=new Headers,t=JSON.parse(sessionStorage.getItem("customer"));return t?(e.append("Content-Type","application/json"),e.append("Authorization","Bearer "+t.token)):e.append("Content-Type","application/json"),e},n=async(e,t)=>{let s,r=l();try{let l=await fetch(`${a}${e}`,{method:"POST",headers:r,body:JSON.stringify(t)});s=await l.json()}catch(n){s=n}return s}},2176:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(9835),r=s(6970);const l=(0,a._)("div",{class:"text-h4 text-center q-mt-md q-mb-md text-primary"},"Login",-1),n={class:"text-title2 text-center text-positive text-bold q-mt-sm"};function o(e,t,s,o,i,u){const d=(0,a.up)("q-input"),m=(0,a.up)("q-btn"),c=(0,a.up)("q-form"),p=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a._)("div",n,(0,r.zw)(o.state.status),1),(0,a.Wm)(p,{class:"q-ma-md q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"myForm",class:"q-gutter-md",greedy:"",onSubmit:o.login,onReset:o.resetFields},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{outlined:"",placeholder:"Enter Email",id:"email",modelValue:o.state.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.state.email=e),rules:[o.isRequired,o.isValidEmail]},null,8,["modelValue","rules"]),(0,a.Wm)(d,{outlined:"",placeholder:"Enter Password",id:"password",modelValue:o.state.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.state.password=e),type:"password",rules:[o.isRequired]},null,8,["modelValue","rules"]),(0,a.Wm)(m,{label:"Login",type:"submit"}),(0,a.Wm)(m,{label:"Reset",type:"reset"})])),_:1},8,["onSubmit","onReset"])])),_:1})],64)}s(9665);var i=s(499),u=s(5572),d=s(8339);const m={setup(){const e=(0,d.tv)(),t=(0,d.yj)();let s=(0,i.qj)({status:"",email:"",password:""});const a=e=>{const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Invalid email"},r=e=>!!e||"field is required",l=async()=>{s.status="logging in...";let a={email:s.email,password:s.password};try{let r=await(0,u.C)("customer/login",a);r.token.includes("failed")?s.status=r.token:(sessionStorage.setItem("customer",JSON.stringify(r)),s.status="login successful",t.query.nextUrl?e.push({path:t.query.nextUrl}):e.push({path:"/"}))}catch(r){s.status=r.message}},n=()=>{s.email="",s.password="",s.status=""};return{state:s,login:l,isRequired:r,resetFields:n,isValidEmail:a}}};var c=s(1639),p=s(4458),h=s(8326),g=s(6611),y=s(4455),w=s(9984),q=s.n(w);const b=(0,c.Z)(m,[["render",o]]),f=b;q()(m,"components",{QCard:p.Z,QForm:h.Z,QInput:g.Z,QBtn:y.Z})}}]);